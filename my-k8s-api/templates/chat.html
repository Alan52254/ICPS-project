{% extends "base.html" %}

{% block title %}AI Assistant - K8s Monitor{% endblock %}

{% block content %}

    <!-- Chat Header Section -->
    <section class="py-5 mt-5">
        <div class="container">
            <div class="text-center mb-4">
                <h1 class="display-5 fw-bold">
                    <span class="gradient-text" data-lang="chat-page-title">AI Assistant</span>
                </h1>
                <p class="lead" data-lang="chat-header-desc">
                    Get intelligent help with your Kubernetes cluster management
                </p>
            </div>
        </div>
    </section>

    <!-- AI Chat Section -->
    <section id="chat" class="py-3">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="section-card p-4" style="min-height: 600px; display: flex; flex-direction: column;">
                        <!-- Chat Controls -->
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5 class="mb-0" data-lang="chat-title">Chat with AI</h5>
                            <div class="btn-group" role="group">
                                <button type="button" id="clearChatBtn" class="btn btn-outline-secondary btn-sm">
                                    <i class="fas fa-trash me-1"></i>
                                    <span data-lang="chat-clear-btn">Clear</span>
                                </button>
                                <button type="button" id="exportChatBtn" class="btn btn-outline-primary btn-sm">
                                    <i class="fas fa-download me-1"></i>
                                    <span data-lang="chat-export-btn">Export</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Chat Window -->
                        <div id="chatWindow" class="chat-window flex-grow-1 mb-3">
                            <div class="text-center text-muted py-5">
                                <i class="fas fa-comments fa-3x mb-3" style="color: var(--primary);"></i>
                                <h5 data-lang="chat-welcome-title">Start Conversation with AI Assistant</h5>
                                <p data-lang="chat-welcome-desc">Ask about Kubernetes cluster status, Pod conditions, or troubleshooting advice</p>
                                
                                <!-- Sample Questions -->
                                <div class="mt-4">
                                    <h6 class="mb-3" data-lang="chat-sample-title">Try asking:</h6>
                                    <div class="d-flex flex-wrap justify-content-center gap-2">
                                        <button class="btn btn-outline-primary btn-sm sample-question" 
                                                data-question="What pods are currently running in the default namespace?">
                                            <span data-lang="chat-sample-1">Pod status</span>
                                        </button>
                                        <button class="btn btn-outline-primary btn-sm sample-question" 
                                                data-question="Show me the resource usage of my cluster">
                                            <span data-lang="chat-sample-2">Resource usage</span>
                                        </button>
                                        <button class="btn btn-outline-primary btn-sm sample-question" 
                                                data-question="How can I troubleshoot a failing pod?">
                                            <span data-lang="chat-sample-3">Troubleshooting</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Chat Input Form -->
                        <form id="chatForm" class="d-flex gap-3 align-items-end">
                            <div class="flex-grow-1">
                                <textarea 
                                    id="messageInput" 
                                    class="form-control" 
                                    data-lang-placeholder="chat-input-placeholder"
                                    placeholder="Type your question about Kubernetes..."
                                    rows="1"
                                    style="resize: none; overflow: hidden;"
                                    required
                                ></textarea>
                                <small class="text-muted" data-lang="chat-input-hint">
                                    Press Shift+Enter for new line, Enter to send
                                </small>
                            </div>
                            <div class="d-flex flex-column gap-2">
                                <button type="submit" class="btn btn-primary" id="sendBtn">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                                <button type="button" class="btn btn-outline-secondary" id="voiceBtn" title="Voice input">
                                    <i class="fas fa-microphone"></i>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- Chat Features Info -->
            <div class="row mt-4">
                <div class="col-lg-10 mx-auto">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <div class="text-center p-3 bg-light rounded">
                                <i class="fas fa-brain fa-2x text-primary mb-2"></i>
                                <h6 data-lang="chat-feature-1-title">Intelligent Analysis</h6>
                                <small class="text-muted" data-lang="chat-feature-1-desc">
                                    AI analyzes your cluster data to provide accurate insights
                                </small>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="text-center p-3 bg-light rounded">
                                <i class="fas fa-history fa-2x text-info mb-2"></i>
                                <h6 data-lang="chat-feature-2-title">Context Aware</h6>
                                <small class="text-muted" data-lang="chat-feature-2-desc">
                                    Remembers conversation context for better responses
                                </small>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="text-center p-3 bg-light rounded">
                                <i class="fas fa-tools fa-2x text-success mb-2"></i>
                                <h6 data-lang="chat-feature-3-title">Action Suggestions</h6>
                                <small class="text-muted" data-lang="chat-feature-3-desc">
                                    Provides actionable solutions and kubectl commands
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

{% endblock %}

{% block scripts %}
<script type="module" src="/static/js/chat.js"></script>
{% endblock %}